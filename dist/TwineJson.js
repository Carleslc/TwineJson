window.onload=function(){"undefined"==typeof window.TwineJson&&(window.TwineJson={convert:function(){var e=window.document.getElementById("output");e.innerHTML=this["export"]()},"export":function(){var e=[],t=window.document.getElementsByTagName("tw-storydata");t&&e.push(this.buildPassage("StoryTitle","",t[0].getAttribute("name")));var n=window.document.getElementById("twine-user-script");n&&e.push(this.buildPassage("UserScript","script",n.innerHTML));var s=window.document.getElementById("twine-user-stylesheet");s&&e.push(this.buildPassage("UserStylesheet","stylesheet",s.innerHTML));for(var i=window.document.getElementsByTagName("tw-passagedata"),r=0;r<i.length;++r)e.push(this.buildPassageFromElement(i[r]));return e.join("")},buildPassageFromElement:function(e){var t=e.getAttribute("name");t||(t="Untitled Passage");var n=e.getAttribute("tags"),s=e.textContent;return this.buildPassage(t,n,s)},buildPassage:function(e,t,n){var s=[];return s.push('"',e,'"'),t&&(s.push(",\r\n"),s.push('"tags" : '),s.push("[",t,"]")),s.push(",\r\n"),s.push('"content" : '),s.push('\r\n"',this.scrub(n),'"\r\n'),s.join("")},scrub:function(e){return e&&(e=e.replace(/^\"/gm,"'")),e}}),window.TwineJson.convert()};